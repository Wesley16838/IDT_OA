{"ast":null,"code":"var _jsxFileName = \"/Users/wesley/Desktop/idt/client/src/Components/historyList.js\";\nimport React, { Component } from 'react'; // import axios from 'axios';\n\nimport { withRouter } from 'react-router-dom';\n\nclass Historylist extends Component {\n  constructor(props) {\n    super(props);\n\n    this.top = e => {\n      var num = e.target.value;\n      this.setState({\n        newtop: num\n      });\n    };\n\n    this.date = e => {\n      var date = e.target.value;\n      this.setState({\n        date: date\n      });\n    };\n\n    this.submit = e => {\n      e.preventDefault();\n      var locations = this.state.locations; //original \n\n      var newlocations = this.state.newlocations; //new location\n\n      var num = this.state.locations.length; //original \n\n      var newnum = this.state.newtop; //Input num\n\n      var date = this.state.date; //date user input\n\n      var new_locations = []; //tmp\n\n      console.log('before date,', date);\n      console.log('before newnum,', newnum); //Both Nothing\n\n      if (date == '' && newnum == '') {\n        console.log('both nothing');\n        this.setState({\n          newlocations: locations\n        });\n      } //if date is nothing\n\n\n      if (date === '') {\n        console.log('input date is nothing'); //if num > new location number\n\n        if (newnum > this.state.locations.length) {\n          alert('Number must smaller than the number of element in the list!');\n        } else {\n          //if input is nothing\n          if (newnum == '') {\n            console.log('input num is nothing');\n            newnum = this.state.locations.length;\n          }\n\n          for (var i = 0; i < newnum; i++) {\n            new_locations.push(locations[i]);\n          }\n\n          this.setState({\n            newlocations: new_locations\n          });\n        }\n      } else {\n        console.log('date is something');\n        var arr = date.split('-'); //user input\n\n        var arr_next = [];\n        var arr_before = [];\n\n        if (this.state.newtop == '') {\n          console.log('if input is nothing');\n\n          for (var j = 0; j < num; j++) {\n            arr_before = locations[j].time.split('-');\n            arr[1] = arr[1].replace('0', '');\n\n            if (arr[0] === arr_before[0] && arr[1] === arr_before[1] && arr[2] === arr_before[2]) {\n              arr_next.push(locations[j]);\n            }\n          }\n\n          this.setState({\n            newlocations: arr_next\n          });\n        } else {\n          console.log('if input has something');\n          console.log('newlocations,', newlocations);\n          console.log('arr,', arr);\n\n          for (var j = 0; j < num; j++) {\n            arr_before = locations[j].time.split('-');\n            arr[1] = arr[1].replace('0', '');\n\n            if (arr[0] === arr_before[0] && arr[1] === arr_before[1] && arr[2] === arr_before[2]) {\n              console.log('符合');\n              arr_next.push(locations[j]);\n            }\n          }\n\n          console.log('1arr_next,', arr_next);\n          var datelength = arr_next.length;\n\n          if (newnum > datelength) {\n            alert('Number must smaller than the number of element in the list!');\n          } else {\n            var n = arr_next.length - newnum - 1;\n\n            for (var k = n; k >= 0; k--) {\n              console.log('k,', k);\n              arr_next.pop(newlocations[j]);\n            }\n\n            console.log('2arr_next,', arr_next);\n            this.setState({\n              newlocations: arr_next,\n              datelocations: datelength\n            });\n          }\n        }\n      }\n    };\n\n    this.state = {\n      locations: this.props.locations.reverse(),\n      newlocations: this.props.locations,\n      top: this.props.locations.length,\n      newtop: '',\n      err: null,\n      date: '',\n      datelocations: 0\n    };\n  }\n\n  render() {\n    console.log(\"in historylist render!!!\");\n    console.log(this.state.newlocations); // console.log('date from server,',this.state.locations[0].time)//Wed Feb 12 2020 14:10:16 GMT-0500 (Eastern Standard Time)\n    // console.log('date from client,',this.state.date)\n\n    var section = null;\n    section = this.state.newlocations && this.state.newlocations.map((next, i) => {\n      return React.createElement(\"li\", {\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, i + 1, \". Ip Address: \", next.ip, \" - Date: \", next.time);\n    });\n    return React.createElement(\"div\", {\n      className: \"historylist\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"filtertop\",\n      onSubmit: this.submit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"filter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"number\",\n      id: \"top\",\n      onChange: this.top,\n      placeholder: \"Search for top N...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, this.state.errtop)), React.createElement(\"div\", {\n      className: \"filter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"date\",\n      id: \"date\",\n      onChange: this.date,\n      placeholder: \"Search for date...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, this.state.errdate)), React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, \"Search\")), React.createElement(\"ol\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, section));\n  }\n\n}\n\nexport default withRouter(Historylist);","map":{"version":3,"sources":["/Users/wesley/Desktop/idt/client/src/Components/historyList.js"],"names":["React","Component","withRouter","Historylist","constructor","props","top","e","num","target","value","setState","newtop","date","submit","preventDefault","locations","state","newlocations","length","newnum","new_locations","console","log","alert","i","push","arr","split","arr_next","arr_before","j","time","replace","datelength","n","k","pop","datelocations","reverse","err","render","section","map","next","ip","errtop","errdate"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\n// import axios from 'axios';\nimport {\n    withRouter\n  } from 'react-router-dom'\nclass Historylist extends Component {\n  constructor(props) {\n   \n    super(props);\n   \n    this.state = {\n       locations:this.props.locations.reverse(),\n       newlocations:this.props.locations,\n\n       top:this.props.locations.length,\n       newtop:'',\n       \n       err:null,\n       date:'',\n       datelocations:0\n    }\n    \n  }\n  \n  top = e =>{\n    var num = e.target.value;    \n    this.setState({newtop:num}) \n  }\n \n  date = e =>{\n    var date = e.target.value;\n    this.setState({date:date}) \n  }\n  submit = e =>{\n    e.preventDefault();\n    var locations = this.state.locations//original \n    var newlocations = this.state.newlocations;//new location\n\n    var num = this.state.locations.length;//original \n    var newnum = this.state.newtop;//Input num\n   \n    var date = this.state.date;//date user input\n    \n    var new_locations = [];//tmp\n    console.log('before date,',date);\n    console.log('before newnum,',newnum);\n\n    //Both Nothing\n    if(date == '' && newnum==''){\n      console.log('both nothing')\n      this.setState({newlocations:locations})\n    }\n\n    //if date is nothing\n    if(date === ''){\n      console.log('input date is nothing')\n      //if num > new location number\n      if(newnum > this.state.locations.length){\n        alert('Number must smaller than the number of element in the list!')\n      }else{\n        //if input is nothing\n        if(newnum == ''){\n          console.log('input num is nothing')\n          newnum = this.state.locations.length\n        }\n        for(var i = 0; i<newnum; i++){\n          new_locations.push(locations[i])\n        } \n        this.setState({newlocations:new_locations})\n      }   \n    }else{\n      console.log('date is something')\n     \n\n        var arr = date.split('-')//user input\n        var arr_next = []\n        var arr_before = []\n  \n        if(this.state.newtop == ''){\n          console.log('if input is nothing')\n          for(var j=0;j<num;j++){\n            arr_before = locations[j].time.split('-')\n            arr[1] = arr[1].replace('0','')\n            if(arr[0] === arr_before[0] && arr[1] === arr_before[1] && arr[2] === arr_before[2]){\n              arr_next.push(locations[j])\n            }\n          }\n          this.setState({newlocations:arr_next})\n        }else{\n          console.log('if input has something')\n          console.log('newlocations,',newlocations)\n          console.log('arr,',arr)\n          for(var j=0;j<num;j++){\n            arr_before = locations[j].time.split('-')\n            arr[1] = arr[1].replace('0','')\n            if(arr[0] === arr_before[0] && arr[1] === arr_before[1] && arr[2] === arr_before[2]){\n              console.log('符合')\n              arr_next.push(locations[j])\n            }\n          }\n          console.log('1arr_next,',arr_next)\n\n          var datelength = arr_next.length\n          if(newnum > datelength){\n            alert('Number must smaller than the number of element in the list!');\n           \n          }else{\n            var n = (arr_next.length-newnum)-1\n            for(var k=n; k>=0;k--){\n              console.log('k,',k)\n              arr_next.pop(newlocations[j])\n            }\n            console.log('2arr_next,',arr_next)\n            this.setState({newlocations:arr_next, datelocations:datelength})\n          }\n         \n        }\n        \n        \n\n    }\n    \n  }\n  render() {\n    console.log(\"in historylist render!!!\")\n    console.log(this.state.newlocations)\n    // console.log('date from server,',this.state.locations[0].time)//Wed Feb 12 2020 14:10:16 GMT-0500 (Eastern Standard Time)\n    // console.log('date from client,',this.state.date)\n   \n    var section = null;\n     \n    section = this.state.newlocations && this.state.newlocations.map((next,i) => {\n      return (\n        <li key={i}>\n          {i+1}. Ip Address: {next.ip} - Date: {next.time}\n        </li>\n        )\n    })\n    return(\n        <div className='historylist'>\n         \n          <form className=\"filtertop\" onSubmit={this.submit}>\n            <div className=\"filter\">\n                <input type=\"number\" id=\"top\" onChange={this.top} placeholder=\"Search for top N...\"></input>\n                <p className='error'>{this.state.errtop}</p>\n            </div>\n            <div className=\"filter\">\n                <input type=\"date\" id=\"date\" onChange={this.date} placeholder=\"Search for date...\"></input>\n                <p className='error'>{this.state.errdate}</p>\n            </div>\n            <button type=\"submit\" className=\"btn btn-primary\">Search</button>\n          </form>\n          <ol>\n          {section} \n          </ol>\n          \n        </div>\n           \n    \n    )\n  }\n}\n\nexport default withRouter(Historylist);"]},"metadata":{},"sourceType":"module"}