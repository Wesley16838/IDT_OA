{"ast":null,"code":"var _jsxFileName = \"/Users/wesley/Desktop/idt/client/src/Components/historyList.js\";\nimport React, { Component } from 'react'; // import axios from 'axios';\n\nimport { withRouter } from 'react-router-dom';\n\nclass Historylist extends Component {\n  constructor(props) {\n    super(props);\n\n    this.top = e => {\n      var num = e.target.value;\n      this.setState({\n        newtop: num\n      });\n    };\n\n    this.date = e => {\n      var date = e.target.value;\n      this.setState({\n        date: date\n      });\n    };\n\n    this.submit = e => {\n      e.preventDefault();\n      var locations = this.state.locations; //original \n\n      var newlocations = this.state.newlocations; //new location\n\n      var num = this.state.num; //original \n\n      var newnum = this.state.newtop; //Input num\n\n      var date = this.state.date; //date user input\n\n      var new_locations = []; //tmp\n\n      console.log('before date,', date);\n      console.log('before newnum,', newnum); //Both Nothing\n\n      if (date = '' && newnum == '') {\n        console.log('both nothing');\n        this.setState({\n          newlocations: locations\n        });\n      }\n\n      if (date === '') {\n        if (num > this.state.newlocations.length) {\n          alert('Number must smaller than the number of element in the list!');\n        } else {\n          if (num == '') {\n            num = this.state.locations.length;\n          }\n\n          for (var i = 0; i < num; i++) {\n            new_locations.push(locations[i]);\n          }\n\n          this.setState({\n            newlocations: new_locations\n          });\n        }\n      } else {\n        if (num > this.state.newlocations.length) {\n          alert('Number must smaller than the number of element in the list!');\n        } else {\n          var arr = date.split('-'); //user input\n\n          var arr_next = [];\n          var arr_before = [];\n\n          if (num == '') {\n            num = this.state.locations.length;\n          }\n\n          for (var j = 0; j < num; j++) {\n            arr_before = locations[j].time.split('-');\n            arr[1] = arr[1].replace('0', '');\n\n            if (arr[0] === arr_before[0] && arr[1] === arr_before[1] && arr[2] === arr_before[2]) {\n              arr_next.push(locations[j]);\n            }\n          }\n\n          this.setState({\n            newlocations: arr_next\n          });\n        }\n      }\n    };\n\n    this.state = {\n      locations: this.props.locations.reverse(),\n      newlocations: this.props.locations,\n      top: this.props.locations.length,\n      newtop: this.props.locations.length,\n      err: null,\n      date: ''\n    };\n  }\n\n  render() {\n    console.log(\"in historylist render!!!\");\n    console.log(this.state.newlocations); // console.log('date from server,',this.state.locations[0].time)//Wed Feb 12 2020 14:10:16 GMT-0500 (Eastern Standard Time)\n    // console.log('date from client,',this.state.date)\n\n    var section = null;\n    section = this.state.newlocations && this.state.newlocations.map((next, i) => {\n      return React.createElement(\"li\", {\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, i + 1, \". Ip Address: \", next.ip, \" - Date: \", next.time);\n    });\n    return React.createElement(\"div\", {\n      className: \"historylist\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"filtertop\",\n      onSubmit: this.submit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"filter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"number\",\n      id: \"top\",\n      onChange: this.top,\n      placeholder: \"Search for top N...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, this.state.errtop)), React.createElement(\"div\", {\n      className: \"filter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"date\",\n      id: \"date\",\n      onChange: this.date,\n      placeholder: \"Search for date...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, this.state.errdate)), React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Search\")), React.createElement(\"ol\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, section));\n  }\n\n}\n\nexport default withRouter(Historylist);","map":{"version":3,"sources":["/Users/wesley/Desktop/idt/client/src/Components/historyList.js"],"names":["React","Component","withRouter","Historylist","constructor","props","top","e","num","target","value","setState","newtop","date","submit","preventDefault","locations","state","newlocations","newnum","new_locations","console","log","length","alert","i","push","arr","split","arr_next","arr_before","j","time","replace","reverse","err","render","section","map","next","ip","errtop","errdate"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\n// import axios from 'axios';\nimport {\n    withRouter\n  } from 'react-router-dom'\nclass Historylist extends Component {\n  constructor(props) {\n   \n    super(props);\n   \n    this.state = {\n       locations:this.props.locations.reverse(),\n       newlocations:this.props.locations,\n\n       top:this.props.locations.length,\n       newtop:this.props.locations.length,\n       \n       err:null,\n       date:''\n    }\n    \n  }\n  \n  top = e =>{\n    var num = e.target.value;    \n    this.setState({newtop:num}) \n  }\n \n  date = e =>{\n    var date = e.target.value;\n    this.setState({date:date}) \n  }\n  submit = e =>{\n    e.preventDefault();\n    var locations = this.state.locations//original \n    var newlocations = this.state.newlocations;//new location\n\n    var num = this.state.num;//original \n    var newnum = this.state.newtop;//Input num\n   \n    var date = this.state.date;//date user input\n    \n    var new_locations = [];//tmp\n    console.log('before date,',date);\n    console.log('before newnum,',newnum);\n    //Both Nothing\n    if(date = '' && newnum==''){\n      console.log('both nothing')\n      this.setState({newlocations:locations})\n    }\n    if(date === ''){\n      if(num > this.state.newlocations.length){\n        alert('Number must smaller than the number of element in the list!')\n      }else{\n        if(num == ''){\n          num = this.state.locations.length\n        }\n        for(var i = 0; i<num; i++){\n          new_locations.push(locations[i])\n        } \n        this.setState({newlocations:new_locations})\n      }   \n    }else{\n      if(num > this.state.newlocations.length){\n        alert('Number must smaller than the number of element in the list!')\n      }else{\n        var arr = date.split('-')//user input\n        var arr_next = []\n        var arr_before = []\n        if(num == ''){\n          num = this.state.locations.length\n        }\n        for(var j=0;j<num;j++){\n          arr_before = locations[j].time.split('-')\n          arr[1] = arr[1].replace('0','')\n          if(arr[0] === arr_before[0] && arr[1] === arr_before[1] && arr[2] === arr_before[2]){\n            arr_next.push(locations[j])\n          }\n        }\n        this.setState({newlocations:arr_next})\n      }\n    }\n    \n  }\n  render() {\n    console.log(\"in historylist render!!!\")\n    console.log(this.state.newlocations)\n    // console.log('date from server,',this.state.locations[0].time)//Wed Feb 12 2020 14:10:16 GMT-0500 (Eastern Standard Time)\n    // console.log('date from client,',this.state.date)\n   \n    var section = null;\n     \n    section = this.state.newlocations && this.state.newlocations.map((next,i) => {\n      return (\n        <li key={i}>\n          {i+1}. Ip Address: {next.ip} - Date: {next.time}\n        </li>\n        )\n    })\n    return(\n        <div className='historylist'>\n         \n          <form className=\"filtertop\" onSubmit={this.submit}>\n            <div className=\"filter\">\n                <input type=\"number\" id=\"top\" onChange={this.top} placeholder=\"Search for top N...\"></input>\n                <p className='error'>{this.state.errtop}</p>\n            </div>\n            <div className=\"filter\">\n                <input type=\"date\" id=\"date\" onChange={this.date} placeholder=\"Search for date...\"></input>\n                <p className='error'>{this.state.errdate}</p>\n            </div>\n            <button type=\"submit\" className=\"btn btn-primary\">Search</button>\n          </form>\n          <ol>\n          {section} \n          </ol>\n          \n        </div>\n           \n    \n    )\n  }\n}\n\nexport default withRouter(Historylist);"]},"metadata":{},"sourceType":"module"}