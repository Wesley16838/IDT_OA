{"ast":null,"code":"var _jsxFileName = \"/Users/wesley/Desktop/idt/client/src/Components/historyList.js\";\nimport React, { Component } from 'react'; // import axios from 'axios';\n\nimport { withRouter } from 'react-router-dom';\n\nclass Historylist extends Component {\n  constructor(props) {\n    super(props);\n\n    this.top = e => {\n      var num = e.target.value;\n      this.setState({\n        newtop: num\n      });\n    };\n\n    this.date = e => {\n      var date = e.target.value;\n      this.setState({\n        date: date\n      });\n    };\n\n    this.submit = e => {\n      e.preventDefault();\n      var locations = this.state.locations; //original \n\n      var newlocations = this.state.newlocations; //new location\n\n      var num = this.state.locations.length; //original \n\n      var newnum = this.state.newtop; //Input num  \n\n      var date = this.state.date; //date user input\n\n      var new_locations = []; //tmp\n      //Both Nothing\n\n      if (date === '' && newnum === '') {\n        this.setState({\n          newlocations: locations\n        });\n      } //if date is nothing\n\n\n      if (date === '') {\n        //if num > new location number\n        if (newnum > this.state.locations.length) {\n          alert('Number must smaller than the number of element in the list!');\n        } else {\n          //if input is nothing\n          if (newnum === '') {\n            newnum = this.state.locations.length;\n          }\n\n          for (var i = 0; i < newnum; i++) {\n            new_locations.push(locations[i]);\n          }\n\n          this.setState({\n            newlocations: new_locations\n          });\n        }\n      } else {\n        var arr = date.split('-'); //user input\n\n        var arr_next = [];\n        var arr_before = [];\n\n        if (this.state.newtop === '') {\n          for (var j = 0; j < num; j++) {\n            arr_before = locations[j].time.split('-');\n            arr[1] = arr[1].replace('0', '');\n\n            if (arr[0] === arr_before[0] && arr[1] === arr_before[1] && arr[2] === arr_before[2]) {\n              arr_next.push(locations[j]);\n            }\n          }\n\n          this.setState({\n            newlocations: arr_next\n          });\n        } else {\n          for (var j = 0; j < num; j++) {\n            arr_before = locations[j].time.split('-');\n            arr[1] = arr[1].replace('0', '');\n\n            if (arr[0] === arr_before[0] && arr[1] === arr_before[1] && arr[2] === arr_before[2]) {\n              arr_next.push(locations[j]);\n            }\n          }\n\n          var datelength = arr_next.length;\n\n          if (newnum > datelength) {\n            alert('Number must smaller than the number of element in the list!');\n          } else {\n            var n = arr_next.length - newnum - 1;\n\n            for (var k = n; k >= 0; k--) {\n              arr_next.pop(newlocations[j]);\n            }\n\n            this.setState({\n              newlocations: arr_next,\n              datelocations: datelength\n            });\n          }\n        }\n      }\n    };\n\n    this.state = {\n      locations: this.props.locations.reverse(),\n      newlocations: this.props.locations,\n      top: this.props.locations.length,\n      newtop: '',\n      err: null,\n      date: '',\n      datelocations: 0\n    };\n  }\n\n  render() {\n    var section = null;\n    section = this.state.newlocations && this.state.newlocations.map((next, i) => {\n      return React.createElement(\"li\", {\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, i + 1, \". Ip Address: \", next.ip, \" - Date: \", next.time);\n    });\n    return React.createElement(\"div\", {\n      className: \"historylist\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"filtertop\",\n      onSubmit: this.submit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"filter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"number\",\n      id: \"top\",\n      onChange: this.top,\n      placeholder: \"Search for top N...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, this.state.errtop)), React.createElement(\"div\", {\n      className: \"filter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"date\",\n      id: \"date\",\n      onChange: this.date,\n      placeholder: \"Search for date...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, this.state.errdate)), React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Search\")), React.createElement(\"ol\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, section));\n  }\n\n}\n\nexport default withRouter(Historylist);","map":{"version":3,"sources":["/Users/wesley/Desktop/idt/client/src/Components/historyList.js"],"names":["React","Component","withRouter","Historylist","constructor","props","top","e","num","target","value","setState","newtop","date","submit","preventDefault","locations","state","newlocations","length","newnum","new_locations","alert","i","push","arr","split","arr_next","arr_before","j","time","replace","datelength","n","k","pop","datelocations","reverse","err","render","section","map","next","ip","errtop","errdate"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\n// import axios from 'axios';\nimport {\n    withRouter\n  } from 'react-router-dom'\nclass Historylist extends Component {\n  constructor(props) {\n   \n    super(props);\n   \n    this.state = {\n       locations:this.props.locations.reverse(),\n       newlocations:this.props.locations,\n\n       top:this.props.locations.length,\n       newtop:'',\n       \n       err:null,\n       date:'',\n       datelocations:0\n    }\n    \n  }\n  \n  top = e =>{\n    var num = e.target.value;    \n    this.setState({newtop:num}) \n  }\n \n  date = e =>{\n    var date = e.target.value;\n    this.setState({date:date}) \n  }\n  submit = e =>{\n    e.preventDefault();\n    var locations = this.state.locations//original \n    var newlocations = this.state.newlocations;//new location\n    var num = this.state.locations.length;//original \n    var newnum = this.state.newtop;//Input num  \n    var date = this.state.date;//date user input\n    \n    var new_locations = [];//tmp\n    //Both Nothing\n    if(date === '' && newnum===''){\n      this.setState({newlocations:locations})\n    }\n    //if date is nothing\n    if(date === ''){\n     \n      //if num > new location number\n      if(newnum > this.state.locations.length){\n        alert('Number must smaller than the number of element in the list!')\n      }else{\n        //if input is nothing\n        if(newnum === ''){\n          newnum = this.state.locations.length\n        }\n        for(var i = 0; i<newnum; i++){\n          new_locations.push(locations[i])\n        } \n        this.setState({newlocations:new_locations})\n      }   \n    }else{\n        var arr = date.split('-')//user input\n        var arr_next = []\n        var arr_before = []\n  \n        if(this.state.newtop === ''){\n          for(var j=0;j<num;j++){\n            arr_before = locations[j].time.split('-')\n            arr[1] = arr[1].replace('0','')\n            if(arr[0] === arr_before[0] && arr[1] === arr_before[1] && arr[2] === arr_before[2]){\n              arr_next.push(locations[j])\n            }\n          }\n          this.setState({newlocations:arr_next})\n        }else{\n          for(var j=0;j<num;j++){\n            arr_before = locations[j].time.split('-')\n            arr[1] = arr[1].replace('0','')\n            if(arr[0] === arr_before[0] && arr[1] === arr_before[1] && arr[2] === arr_before[2]){\n              arr_next.push(locations[j])\n            }\n          }\n          var datelength = arr_next.length\n          if(newnum > datelength){\n            alert('Number must smaller than the number of element in the list!');\n           \n          }else{\n            var n = (arr_next.length-newnum)-1\n            for(var k=n; k>=0;k--){\n              arr_next.pop(newlocations[j])\n            }\n            this.setState({newlocations:arr_next, datelocations:datelength})\n          }\n         \n        }\n    }\n  }\n  render() {\n   \n    var section = null;\n     \n    section = this.state.newlocations && this.state.newlocations.map((next,i) => {\n      return (\n        <li key={i}>\n          {i+1}. Ip Address: {next.ip} - Date: {next.time}\n        </li>\n        )\n    })\n    return(\n        <div className='historylist'>\n         \n          <form className=\"filtertop\" onSubmit={this.submit}>\n            <div className=\"filter\">\n                <input type=\"number\" id=\"top\" onChange={this.top} placeholder=\"Search for top N...\"></input>\n                <p className='error'>{this.state.errtop}</p>\n            </div>\n            <div className=\"filter\">\n                <input type=\"date\" id=\"date\" onChange={this.date} placeholder=\"Search for date...\"></input>\n                <p className='error'>{this.state.errdate}</p>\n            </div>\n            <button type=\"submit\" className=\"btn btn-primary\">Search</button>\n          </form>\n          <ol>\n          {section} \n          </ol>\n          \n        </div>\n           \n    \n    )\n  }\n}\n\nexport default withRouter(Historylist);"]},"metadata":{},"sourceType":"module"}