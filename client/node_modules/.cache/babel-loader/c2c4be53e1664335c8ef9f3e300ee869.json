{"ast":null,"code":"import _regeneratorRuntime from\"/Users/wesley/Desktop/idt/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/wesley/Desktop/idt/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/wesley/Desktop/idt/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/wesley/Desktop/idt/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/wesley/Desktop/idt/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/wesley/Desktop/idt/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/wesley/Desktop/idt/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import axios from'axios';import Googlemap from'./googlemap';import{withRouter}from'react-router-dom';var Dashboardpage=/*#__PURE__*/function(_Component){_inherits(Dashboardpage,_Component);function Dashboardpage(props){var _this;_classCallCheck(this,Dashboardpage);_this=_possibleConstructorReturn(this,_getPrototypeOf(Dashboardpage).call(this,props));_this.handleChange=function(e){_this.setState({ip:e.target.value});};_this.handleChangemobile=function(e){_this.setState({mobile:e.target.value.replace(/\\D/,'')});};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _this$state,ip,mobile,info,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;e.preventDefault();_this$state=_this.state,ip=_this$state.ip,mobile=_this$state.mobile;console.log('state,',_this.state);if(!(/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(ip)&&mobile.length===10)){_context.next=14;break;}_context.next=7;return axios.get('https://api.ipgeolocation.io/ipgeo?apiKey=e53d709ac76741288e7508c734e53785&ip='+ip);case 7:info=_context.sent;_context.next=10;return axios.post('/location',{ip:ip,latitude:info.data.latitude,longitude:info.data.longitude,mobile:mobile});case 10:result=_context.sent;_this.setState({latitude:result.data.location.latitude,longitude:result.data.location.longitude});_context.next=15;break;case 14:alert(\"You have entered an invalid IP address or phone number!\");case 15:_context.next=20;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](0);console.log('error: '+_context.t0);case 20:case\"end\":return _context.stop();}}},_callee,null,[[0,17]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={ip:'',latitude:'',longitude:'',mobile:''};return _this;}_createClass(Dashboardpage,[{key:\"componentDidMount\",value:function componentDidMount(){}},{key:\"render\",value:function render(){console.log(\"in landingpage render!!!\");return React.createElement(\"div\",{className:\"container\"},React.createElement(\"form\",{onSubmit:this.handleSubmit},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"div\",{className:\"form-group row\"},React.createElement(\"label\",{htmlFor:\"ip\"},\"Ip address\"),React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"ip\",\"aria-describedby\":\"ipHelp\",name:\"ip\",value:this.state.ip,onChange:this.handleChange}),React.createElement(\"small\",{id:\"ipHelp\",className:\"form-text text-muted\"},\"Input ip address.\")),React.createElement(\"div\",{className:\"form-group row\"},React.createElement(\"label\",{htmlFor:\"mobile\"},\"Phone Number\"),React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"mobile\",\"aria-describedby\":\"mobileHelp\",name:\"mobile\",value:this.state.mobile,onChange:this.handleChangemobile,placeholder:\"EX:2063345306\"}),React.createElement(\"small\",{id:\"mobileHelp\",className:\"form-text text-muted\"},\"Input mobile to get message about information of location(Only allow U.S. User).\"))),React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary\"},\"Submit\")),React.createElement(\"div\",{className:\"location\"},React.createElement(\"p\",null,\"latitude: \",this.state.latitude),React.createElement(\"p\",null,\"longitude: \",this.state.longitude)),React.createElement(Googlemap,{lat:this.state.latitude,lng:this.state.longitude}));}}]);return Dashboardpage;}(Component);export default withRouter(Dashboardpage);","map":{"version":3,"sources":["/Users/wesley/Desktop/idt/client/src/Components/landingpage.js"],"names":["React","Component","axios","Googlemap","withRouter","Dashboardpage","props","handleChange","e","setState","ip","target","value","handleChangemobile","mobile","replace","handleSubmit","preventDefault","state","console","log","test","length","get","info","post","latitude","data","longitude","result","location","alert"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport axios from 'axios';\nimport Googlemap from './googlemap'\nimport {\n    withRouter\n  } from 'react-router-dom'\nclass Dashboardpage extends Component {\n  constructor(props) {\n\n    super(props);\n    this.state = {\n        ip:'',\n        latitude:'',\n        longitude:'',\n        mobile:''\n    }\n    \n  }\n  \n  componentDidMount() {\n    \n  }\n \n  handleChange = e => {\n     \n       \n      \n    this.setState({ip: e.target.value});\n  };\n  handleChangemobile = e => {\n \n    this.setState({mobile: e.target.value.replace(/\\D/,'')});\n  };\n\n  handleSubmit = async e => {\n    try {\n\n        \n        e.preventDefault(); \n        let { ip,mobile } = this.state;\n        console.log('state,',this.state)\n        if (/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(ip) && mobile.length === 10) { \n            \n            var info = await axios.get('https://api.ipgeolocation.io/ipgeo?apiKey=e53d709ac76741288e7508c734e53785&ip='+ip)\n            \n            var result = await axios.post('/location',{\n                ip: ip,\n                latitude: info.data.latitude,\n                longitude: info.data.longitude,\n                mobile:mobile\n              })   \n            this.setState({latitude:result.data.location.latitude, longitude:result.data.location.longitude})\n\n        }else{\n            alert(\"You have entered an invalid IP address or phone number!\")  \n        }\n  \n    }catch(e){\n        console.log('error: ' + e);\n    }\n  }\n  render() {\n    console.log(\"in landingpage render!!!\")\n    return(\n        <div className='container'>\n        \n            <form onSubmit={this.handleSubmit}>\n                <div className=\"form-group\">\n                  <div className=\"form-group row\">\n                    <label htmlFor=\"ip\">Ip address</label>\n                    <input type=\"text\" className=\"form-control\" id=\"ip\" aria-describedby=\"ipHelp\" name=\"ip\" value={this.state.ip} onChange={this.handleChange}/>\n                    <small id=\"ipHelp\" className=\"form-text text-muted\">Input ip address.</small>\n                  </div>\n                  <div className=\"form-group row\">\n                    <label htmlFor=\"mobile\">Phone Number</label>\n                    <input type=\"text\" className=\"form-control\" id=\"mobile\" aria-describedby=\"mobileHelp\" name=\"mobile\" value={this.state.mobile} onChange={this.handleChangemobile} placeholder=\"EX:2063345306\"/>\n                    <small id=\"mobileHelp\" className=\"form-text text-muted\">Input mobile to get message about information of location(Only allow U.S. User).</small>\n                  </div>\n                </div>\n                <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\n            </form>\n            <div className=\"location\">\n                <p>latitude: {this.state.latitude}</p> \n                <p>longitude: {this.state.longitude}</p>\n            </div>\n            <Googlemap lat={this.state.latitude} lng={this.state.longitude}/>\n        </div>\n           \n    \n    )\n  }\n}\n\nexport default withRouter(Dashboardpage);"]},"metadata":{},"sourceType":"module"}