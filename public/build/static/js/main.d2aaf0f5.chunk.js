(this.webpackJsonpidt=this.webpackJsonpidt||[]).push([[0],{40:function(e,t,a){e.exports=a(85)},45:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(15),o=a.n(r),i=(a(45),a(16)),s=a.n(i),c=a(20),m=a(6),p=a(7),u=a(9),h=a(8),d=a(10),g=a(19),b=a.n(g),f=a(17),v={width:"80%",height:"80%"},E=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={lat:parseInt(a.props.lat),lng:parseInt(a.props.lng)},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return console.log("render google map"),console.log("this.state in google,",this.state),console.log("this.props in google,",this.props),""===this.props.lat&&""===this.props.lng?l.a.createElement(f.Map,{google:this.props.google,zoom:8,style:v,initialCenter:{lat:39.833851,lng:-74.871826},center:{lat:39.833851,lng:-74.871826}},l.a.createElement(f.Marker,{position:{lat:39.833851,lng:-74.871826}})):l.a.createElement(f.Map,{google:this.props.google,zoom:8,style:v,initialCenter:{lat:this.props.lat,lng:this.props.lng},center:{lat:this.props.lat,lng:this.props.lng}},l.a.createElement(f.Marker,{position:{lat:this.props.lat,lng:this.props.lng}}))}}]),t}(n.Component),y=Object(f.GoogleApiWrapper)({apiKey:"AIzaSyBmuVFyl548_WfKr2oqchbb4LgEiwHYjEU"})(E),j=a(13),O=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e){a.setState({ip:e.target.value})},a.handleChangemobile=function(e){a.setState({mobile:e.target.value.replace(/\D/,"")})},a.handleSubmit=function(){var e=Object(c.a)(s.a.mark((function e(t){var n,l,r,o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),n=a.state,l=n.ip,r=n.mobile,console.log("state,",a.state),!/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(l)||10!==r.length){e.next=14;break}return e.next=7,b.a.get("https://api.ipgeolocation.io/ipgeo?apiKey=e53d709ac76741288e7508c734e53785&ip="+l);case 7:return o=e.sent,e.next=10,b.a.post("/location",{ip:l,latitude:o.data.latitude,longitude:o.data.longitude,mobile:r});case 10:i=e.sent,a.setState({latitude:i.data.location.latitude,longitude:i.data.location.longitude}),e.next=15;break;case 14:alert("You have entered an invalid IP address or phone number!");case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log("error: "+e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}(),a.state={ip:"",latitude:"",longitude:"",mobile:""},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return console.log("in landingpage render!!!"),l.a.createElement("div",{className:"container"},l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"ip"},"Ip address"),l.a.createElement("input",{type:"text",className:"form-control",id:"ip","aria-describedby":"ipHelp",name:"ip",value:this.state.ip,onChange:this.handleChange}),l.a.createElement("small",{id:"ipHelp",className:"form-text text-muted"},"Input ip address.")),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"mobile"},"Phone Number"),l.a.createElement("input",{type:"text",className:"form-control",id:"mobile","aria-describedby":"mobileHelp",name:"mobile",value:this.state.mobile,onChange:this.handleChangemobile,placeholder:"EX:2063345306"}),l.a.createElement("small",{id:"mobileHelp",className:"form-text text-muted"},"Input mobile to get message about information of location(Only allow U.S. User)."))),l.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit")),l.a.createElement("div",{className:"location"},l.a.createElement("p",null,"latitude: ",this.state.latitude),l.a.createElement("p",null,"longitude: ",this.state.longitude)),l.a.createElement(y,{lat:this.state.latitude,lng:this.state.longitude}))}}]),t}(n.Component),N=Object(j.f)(O),w=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).top=function(e){var t=e.target.value;a.setState({newtop:t})},a.date=function(e){var t=e.target.value;a.setState({date:t})},a.submit=function(e){e.preventDefault();var t=a.state.locations,n=a.state.locations.length,l=a.state.newtop,r=a.state.date,o=[];if(""===r&&""===l&&a.setState({newlocations:t}),""===r)if(l>a.state.locations.length)alert("Number must smaller than the number of element in the list!");else{""===l&&(l=a.state.locations.length);for(var i=0;i<l;i++)o.push(t[i]);a.setState({newlocations:o})}else{var s=r.split("-"),c=[],m=[];if(""===a.state.newtop){for(var p=0;p<n;p++)m=t[p].time.split("-"),s[1]=s[1].replace("0",""),s[0]===m[0]&&s[1]===m[1]&&s[2]===m[2]&&c.push(t[p]);a.setState({newlocations:c})}else{for(var u=0;u<n;u++)m=t[u].time.split("-"),s[1]=s[1].replace("0",""),s[0]===m[0]&&s[1]===m[1]&&s[2]===m[2]&&c.push(t[u]);var h=c.length;if(l>h)alert("Number must smaller than the number of element in the list!");else{for(var d=c.length-l-1;d>=0;d--)c.pop();a.setState({newlocations:c,datelocations:h})}}}},a.state={locations:a.props.locations.reverse(),newlocations:a.props.locations,top:a.props.locations.length,newtop:"",err:null,date:"",datelocations:0},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e;return e=this.state.newlocations&&this.state.newlocations.map((function(e,t){return l.a.createElement("li",{key:t},t+1,". Ip Address: ",e.ip," - Date: ",e.time)})),l.a.createElement("div",{className:"historylist"},l.a.createElement("form",{className:"filtertop",onSubmit:this.submit},l.a.createElement("div",{className:"filter"},l.a.createElement("input",{type:"number",id:"top",onChange:this.top,placeholder:"Search for top N..."}),l.a.createElement("p",{className:"error"},this.state.errtop)),l.a.createElement("div",{className:"filter"},l.a.createElement("input",{type:"date",id:"date",onChange:this.date,placeholder:"Search for date..."}),l.a.createElement("p",{className:"error"},this.state.errdate)),l.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Search")),l.a.createElement("ol",null,e))}}]),t}(n.Component),S=Object(j.f)(w),k=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e){a.setState({ip:e.target.value})},a.handleSubmit=function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{alert("query"),t.preventDefault()}catch(t){alert("error: "+t)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={location:[],loading:!1},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.a.get("/history").then((function(t){e.setState({location:t.data.location,loading:!0})}))}},{key:"render",value:function(){return!1===this.state.loading?l.a.createElement("h1",null,"Loading"):l.a.createElement("div",{className:"container"},l.a.createElement("h1",null,"History"),l.a.createElement(S,{locations:this.state.location}))}}]),t}(n.Component),C=Object(j.f)(k),x=a(12),I=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},l.a.createElement(x.b,{className:"navbar-brand",to:"#"},"IDT"),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},l.a.createElement("ul",{className:"navbar-nav mr-auto mt-2 mt-lg-0"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(x.b,{className:"nav-link",to:"/"},"Home")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(x.b,{className:"nav-link",to:"/history"},"History")))))}}]),t}(n.Component),H=(a(80),a(81),a(39)),D=a.n(H);var M=function(){return l.a.createElement(x.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(D.a,null,l.a.createElement("title",null,"Idt-oa"),l.a.createElement("meta",{name:"description",content:"Idt-oa"}),l.a.createElement("meta",{property:"og:title",content:"Idt-oa"})),l.a.createElement(I,null),l.a.createElement(j.c,null,l.a.createElement(j.a,{exact:!0,path:"/",render:function(e){return l.a.createElement(N,Object.assign({},e,{title:"Landinpage"}))}}),l.a.createElement(j.a,{exact:!0,path:"/history",render:function(e){return l.a.createElement(C,Object.assign({},e,{title:"History"}))}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[40,1,2]]]);
//# sourceMappingURL=main.d2aaf0f5.chunk.js.map